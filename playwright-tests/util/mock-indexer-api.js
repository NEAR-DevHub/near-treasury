/**
 * Mock utilities for the indexer API (ref-sdk-test-cold-haze-1300-2.fly.dev)
 *
 * This avoids rate limiting issues during test runs by providing
 * snapshot responses instead of hitting the live API.
 */

/**
 * Default mock data for ft-tokens endpoint
 * Snapshot taken from: https://ref-sdk-test-cold-haze-1300-2.fly.dev/api/ft-tokens?account_id=testing-astradao.sputnik-dao.near
 */
const DEFAULT_FT_TOKENS_DATA = {
  totalCumulativeAmt: 4.27,
  fts: [
    {
      contract: "wrap.near",
      amount: "1000100000000000000000000",
      ft_meta: {
        name: "Wrapped NEAR fungible token",
        symbol: "wNEAR",
        decimals: 24,
        icon: "https://img.rhea.finance/images/w-NEAR-no-border.png",
        reference: null,
        price: 2.14,
      },
    },
    {
      contract: "blackdragon.tkn.near",
      amount: "70158710654339615937129266881",
      ft_meta: {
        name: "Black Dragon",
        symbol: "BLACKDRAGON",
        decimals: 24,
        icon: "data:image/jpeg;base64,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",
        reference: null,
        price: 1e-8,
      },
    },
    {
      contract:
        "17208628f84f5d6ad33f0da3bbbeb27ffcb398eac501a31bd6ad2011e36133a1",
      amount: "1691395",
      ft_meta: {
        name: "USDC",
        symbol: "USDC",
        decimals: 6,
        icon: "data:image/svg+xml,%3csvg%20width='111'%20height='111'%20viewBox='0%200%20111%20111'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M110.815%2055.4075C110.815%2086.1057%2086.1057%20110.815%2055.4075%20110.815C24.7093%20110.815%200%2086.1057%200%2055.4075C0%2024.7093%2024.7093%200%2055.4075%200C86.1057%200%20110.815%2024.7093%20110.815%2055.4075Z'%20fill='%232775CA'/%3e%3cpath%20d='M68.7293%2065.3976C68.7293%2058.6667%2064.1305%2056.5582%2055.5967%2055.2384C49.2554%2054.2293%2047.5899%2052.712%2047.5899%2049.7529C47.5899%2046.7939%2049.8433%2044.8301%2054.1973%2044.8301C58.1094%2044.8301%2060.2178%2046.1499%2061.0821%2049.3977C61.2269%2050.0168%2061.7182%2050.4064%2062.3649%2050.4064H65.698C66.4895%2050.4064%2067.1086%2049.7597%2067.1086%2048.9958C66.6449%2045.4307%2064.3639%2042.2553%2060.3626%2040.9631V36.5815C60.3626%2035.8728%2059.7988%2035.2261%2058.9896%2035.0813H52.9386C52.2023%2035.0813%2051.5556%2035.6451%2051.4108%2036.4267V40.6631C45.872%2041.8381%2042.0151%2045.3755%2042.0151%2050.0168C42.0151%2056.6029%2046.5863%2058.8839%2055.1477%2060.1761C61.0545%2061.3511%2063.1629%2062.5813%2063.1629%2065.8567C63.1629%2069.132%2060.4074%2071.3578%2056.1982%2071.3578C51.1452%2071.3578%2048.9194%2069.4768%2048.0551%2066.2842C47.8551%2065.6099%2047.3638%2065.2479%2046.7171%2065.2479H43.218C42.4265%2065.2479%2041.8074%2065.8946%2041.8074%2066.6585C42.2712%2070.8673%2044.8818%2075.0486%2051.4384%2076.4789V80.8605C51.4384%2081.5692%2052.0023%2082.2159%2052.8114%2082.3606H58.8624C59.5987%2082.3606%2060.2454%2081.7968%2060.3902%2081.0152V76.6336C66.1175%2075.2862%2069.8295%2071.5742%2069.8295%2065.9463'%20fill='white'/%3e%3cpath%20d='M40.6631%2083.3697C24.8264%2078.2063%2015.3943%2061.2063%2020.5578%2045.3696C23.4891%2036.4267%2029.9752%2029.3026%2038.1904%2025.4181C39.0823%2024.9819%2039.3926%2023.8621%2038.9564%2022.9702C38.5202%2022.0783%2037.4004%2021.768%2036.5086%2022.2042C27.4623%2026.4958%2020.4131%2034.2715%2017.1929%2043.9991C11.5926%2061.3787%2021.8509%2079.7444%2039.2029%2085.3448C40.1224%2085.6827%2041.1594%2085.1638%2041.4974%2084.272C41.8353%2083.3525%2041.3164%2082.3154%2040.4245%2081.9775'%20fill='white'/%3e%3cpath%20d='M92.7092%2067.4125C89.778%2076.3554%2083.2918%2083.4795%2075.0767%2087.364C74.1847%2087.8002%2073.8744%2088.9201%2074.3107%2089.8119C74.6209%2090.4862%2075.2953%2090.9224%2076.0216%2090.9224C76.2768%2090.9224%2076.532%2090.8672%2076.7872%2090.7224C85.8335%2086.4309%2092.8827%2078.6552%2096.103%2068.9275C101.703%2051.5479%2091.4449%2033.1823%2074.0929%2027.5819C73.2009%2027.244%2072.1639%2027.7629%2071.826%2028.6548C71.488%2029.5743%2072.0069%2030.6113%2072.8988%2030.9493C88.7354%2036.1127%2098.1675%2053.1128%2092.9745%2068.9223'%20fill='white'/%3e%3c/svg%3e",
        reference: null,
        price: 0.999776,
      },
    },
    {
      contract: "usdt.tether-token.near",
      amount: "439401",
      ft_meta: {
        name: "Tether USD",
        symbol: "USDt",
        decimals: 6,
        icon: "data:image/svg+xml,%3csvg%20width='111'%20height='111'%20viewBox='0%200%20111%20111'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M55.7327%20110.502C86.2872%20110.502%20111.001%2085.7885%20111.001%2055.234C111.001%2024.6796%2086.2872%200.96582%2055.7327%200.96582C25.1783%200.96582%200.464844%2024.6796%200.464844%2055.234C0.464844%2085.7885%2025.1783%20110.502%2055.7327%20110.502Z'%20fill='%2353AE94'/%3e%3cpath%20d='M65.6964%2053.9849V48.1226H78.8481V39.5562H32.8105V48.1226H45.9622V53.9849C35.2764%2054.6101%2027.1953%2057.1358%2027.1953%2060.1925C27.1953%2063.2493%2035.2764%2065.8112%2045.9622%2066.4001V87.8882H65.6964V66.4001C76.3822%2065.8112%2084.4634%2063.2493%2084.4634%2060.1925C84.4634%2057.1358%2076.3822%2054.5739%2065.6964%2053.9849ZM65.6964%2064.2863V64.2501V64.2863C65.6964%2064.2863%2063.8598%2064.468%2055.8512%2064.468C50.3695%2064.468%2045.9984%2064.2501%2045.9984%2064.2501H45.9622V64.2139V56.1051V56.069C45.9984%2056.069%2050.3695%2056.2869%2055.8512%2056.2869C63.8598%2056.2869%2065.6964%2056.1051%2065.6964%2056.1051V56.1413V64.2139V64.2501Z'%20fill='white'/%3e%3c/svg%3e",
        reference: null,
        price: 0.999589,
      },
    },
  ],
};

/**
 * Mock the indexer API ft-tokens endpoint
 *
 * @param {Page} page - Playwright page object
 * @param {Object} customData - Optional custom mock data to override default
 */
export async function mockIndexerFtTokens(page, customData = null) {
  const mockData = customData || DEFAULT_FT_TOKENS_DATA;

  await page.route(
    "**/ref-sdk-test-cold-haze-1300-2.fly.dev/api/ft-tokens**",
    async (route) => {
      await route.fulfill({
        status: 200,
        contentType: "application/json",
        body: JSON.stringify(mockData),
      });
    }
  );

  // Wait a moment to ensure route handler is fully registered
  await page.waitForTimeout(100);
}
